"use strict";define("/dist/courses/lesson",["form","template"],function(e,s,t){e("form");var n=e("template"),a=$("#lesson"),i=$("#item"),l=$("#total"),o=$("#save");$("#addBtn").on("click",function(){var e=n("lessonTpl",{});return a.find("form").html(e),a.modal(),!1}),$("#addLesson").on("submit",function(){var e=o.attr("data-key"),s=$('[name="ls_name"]').val(),t=$('[name="ls_minutes"]').val(),d=$('[name="ls_seconds"]').val(),r=i.children().size()+1;return $(this).ajaxSubmit({url:"/courses/lesson",type:"post",success:function(o){var c={index:r,lsName:s,lsDuration:t+":"+d},u=n("itemTpl",c);e?(i.find("li").eq(e).find("span.name").text(s),i.find("li").eq(e).find("span.duration").text(t+":"+d)):i.append(u),l.text("课时:"+r),a.modal("hide")}}),!1}),$("#addLesson").on("click",'input[type="checkbox"]',function(){$(this).is(":checked")?$(this).val(1):$(this).val(0)}),i.on("click",".btn",function(){var e=$(this),s=e.parents("li"),t=s.attr("data-id"),i=s.index();e.is(".edit")&&(o.attr("data-key",i),$.ajax({url:"/courses/lesson/edit",type:"post",data:{ls_id:t},success:function(e){var s=e.ls_video_duration.split(":");e.ls_minutes=s[0],e.ls_seconds=s[1];var t=n("lessonTpl",e);$("#addLesson").html(t),a.modal()}})),e.is(".preview")&&alert("预览"),e.is(".delete")&&alert("删除")})});